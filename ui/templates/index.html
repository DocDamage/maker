<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MusicGen Studio</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        .prompt-input-wrapper {
            position: relative;
        }

        .btn-icon-overlay {
            position: absolute;
            bottom: 10px;
            right: 10px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            cursor: pointer;
            padding: 5px 10px;
            font-size: 1.2rem;
            transition: all 0.2s;
        }

        .btn-icon-overlay:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
        }
    </style>
</head>

<body>
    <div class="app">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <div class="logo-icon">üéµ</div>
                <div class="logo-text-wrapper">
                    <span class="logo-text">MusicGen</span>
                    <span class="logo-text-pro">PRO</span>
                </div>
            </div>

            <nav class="nav">
                <div class="nav-section-label">CREATE</div>
                <a href="#" class="nav-item active" data-section="studio">
                    <span class="nav-icon">‚ú®</span>
                    <span>Studio</span>
                </a>
                <a href="#" class="nav-item" data-section="remaster">
                    <span class="nav-icon">üéöÔ∏è</span>
                    <span>Edit & Remaster</span>
                </a>

                <div class="nav-section-label">LIBRARY</div>
                <a href="#" class="nav-item" data-section="library">
                    <span class="nav-icon">üéß</span>
                    <span>My Tracks</span>
                </a>
                <a href="#" class="nav-item" data-section="favorites">
                    <span class="nav-icon">‚ù§Ô∏è</span>
                    <span>Favorites</span>
                </a>

                <div class="nav-section-label">PIPELINE</div>
                <a href="#" class="nav-item" data-section="train">
                    <span class="nav-icon">üß†</span>
                    <span>Train Model</span>
                </a>
                <a href="#" class="nav-item" data-section="dataset">
                    <span class="nav-icon">üìÅ</span>
                    <span>Dataset</span>
                </a>
            </nav>

            <div class="sidebar-footer">
                <div class="user-profile">
                    <div class="user-avatar">üë§</div>
                    <div class="user-info">
                        <span class="user-name">User</span>
                        <span class="user-credits">1200 Credits</span>
                    </div>
                </div>
                <!-- Hidden model status for functionality -->
                <div class="model-status" style="display:none;">
                    <span class="status-dot"></span>
                    <span id="modelName">Loading...</span>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main">
            <!-- STUDIO SECTION (Replaces Generate) -->
            <section id="studio" class="section active">
                <header class="section-header">
                    <h1>Create Music</h1>
                    <p class="subtitle">Select your virtual studio and start composing.</p>
                </header>

                <div class="studio-selector-container">
                    <!-- Standard Studio -->
                    <div class="studio-card active" onclick="selectStudio('standard')" id="studio-standard">
                        <span class="studio-icon">üéπ</span>
                        <span class="studio-name">Standard</span>
                        <span class="studio-desc">Versatile & Clean</span>
                    </div>

                    <!-- Specialized Studios -->
                    <div class="studio-card" onclick="selectStudio('chiptune')" id="studio-chiptune">
                        <span class="studio-icon">üëæ</span>
                        <span class="studio-name">Chiptune</span>
                        <span class="studio-desc">8-bit NES Style</span>
                    </div>
                    <div class="studio-card" onclick="selectStudio('cypher')" id="studio-cypher">
                        <span class="studio-icon">üé§</span>
                        <span class="studio-name">Cypher</span>
                        <span class="studio-desc">Hip Hop / Trap</span>
                    </div>
                    <div class="studio-card" onclick="selectStudio('ironclad')" id="studio-ironclad">
                        <span class="studio-icon">üé∏</span>
                        <span class="studio-name">Ironclad</span>
                        <span class="studio-desc">Metal / Djent</span>
                    </div>
                    <div class="studio-card" onclick="selectStudio('bluenote')" id="studio-bluenote">
                        <span class="studio-icon">üé∑</span>
                        <span class="studio-name">Blue Note</span>
                        <span class="studio-desc">Jazz / Blues</span>
                    </div>
                    <div class="studio-card" onclick="selectStudio('virtuoso')" id="studio-virtuoso">
                        <span class="studio-icon">üéª</span>
                        <span class="studio-name">Virtuoso</span>
                        <span class="studio-desc">Classical</span>
                    </div>
                </div>

                <div class="split-layout">
                    <!-- Prompt Interface -->
                    <div class="studio-creation-panel card">
                        <h3>Song Description</h3>
                        <div class="prompt-input-wrapper">
                            <textarea id="prompt" rows="5" class="sun-input"
                                placeholder="A song about... [Style: Upbeat Pop]"></textarea>
                            <button id="btnEnhance" class="btn-magic" title="Enhance prompt with AI"
                                onclick="enhancePrompt()">‚ú® Inspire Me</button>
                        </div>

                        <div class="studio-controls">
                            <div class="control-group">
                                <label>Duration</label>
                                <select id="duration" class="sun-select">
                                    <option value="15">15s (Preview)</option>
                                    <option value="30" selected>30s</option>
                                    <option value="60">60s</option>
                                </select>
                            </div>
                            <div class="control-group">
                                <label>Creativity</label>
                                <input type="range" id="temperature" min="0.5" max="1.5" step="0.1" value="1.0">
                            </div>
                        </div>

                        <div class="action-bar">
                            <button class="btn btn-primary btn-block btn-xl" id="btnGenerate"
                                onclick="startGeneration()">
                                üéµ Create
                            </button>
                        </div>

                        <div class="generate-progress" id="generateProgress" style="display: none;">
                            <div class="progress-bar">
                                <div class="progress-fill" id="generateProgressBar"></div>
                            </div>
                            <span id="generateMessage">Composing...</span>
                        </div>
                    </div>

                    <!-- Recent Generations (Minifeed) -->
                    <div class="studio-feed card">
                        <h3>Recent Creations</h3>
                        <div id="miniFeed" class="feed-list">
                            <!-- Will be populated by JS -->
                            <div class="empty-feed">Your creations will appear here</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- EDIT & REMASTER SECTION -->
            <section id="remaster" class="section">
                <header class="section-header">
                    <h1>Edit & Remaster</h1>
                    <p class="subtitle">Upscale, extend, or remix your tracks.</p>
                </header>
                <div class="remaster-workspace card">
                    <div class="upload-area small" id="remasterDropZone">
                        <p>Select a track from your library or drop file here</p>
                    </div>
                    <!-- Placeholder controls -->
                    <div class="remaster-controls disabled">
                        <button class="btn btn-secondary">extend</button>
                        <button class="btn btn-secondary">upscale</button>
                        <button class="btn btn-secondary">remix</button>
                    </div>
                </div>
            </section>

            <!-- LIBRARY SECTION -->
            <section id="library" class="section">
                <header class="section-header">
                    <h1>My Library</h1>
                </header>
                <div class="library-filters">
                    <button class="filter-chip active">All</button>
                    <button class="filter-chip">Public</button>
                    <button class="filter-chip">Private</button>
                    <button class="filter-chip">Trash</button>
                </div>
                <div id="generatedLibrary" class="audio-library sun-grid"></div>
            </section>

            <!-- DATASET SECTION (Old "Upload" + "Process") -->
            <section id="dataset" class="section">
                <header class="section-header">
                    <h1>Training Dataset</h1>
                </header>
                <!-- Include content from original Upload/Process/Label sections compacted here if needed, 
                     or keep them simple. For now, we reuse the existing upload grid structure but simplified. -->
                <div class="upload-area" id="dropZone">
                    <h3>Add audio to your dataset</h3>
                    <input type="file" id="fileInput" multiple accept=".mp3,.wav,.flac" hidden>
                    <button class="btn btn-secondary" onclick="document.getElementById('fileInput').click()">Select
                        Files</button>
                </div>
                <div id="rawFileList" class="file-grid"></div>
            </section>

        </main>
    </div>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="toast-container"></div>

    <script src="/static/js/app.js"></script>
</body>

</html>